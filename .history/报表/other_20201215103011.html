<html>

<head>

    <meta charset="utf-8">
    <title>报表</title>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@4.9.0/dist/echarts.min.js"></script>

</head>

<body>
    <div class="container-fluid">
        <div class="row">

            <div class="col-md-3">

                <div id="chartmain" style="width:100%; height: 300px;"></div>

            </div>
            <div class="col-md-3">

                <div id="chartmain1" style="width:100%; height: 300px;"></div>

            </div>
            <div class="col-md-3">

                <div id="chartmain2" style="width:100%; height: 300px;"></div>

            </div>

            <div class="col-md-3">

                <div id="chartmain3" style="width:100%; height: 300px;"></div>

            </div>
        </div>

        <button type="button" class="btn btn-warning" id="formatting" onclick="beautify();">格式化</button>


        <script type="text/javascript">


            //初始化echarts实例
            var myChart = echarts.init(document.getElementById('chartmain'));
            var myChart1 = echarts.init(document.getElementById('chartmain1'));
            var myChart2 = echarts.init(document.getElementById('chartmain2'));
            var myChart3 = echarts.init(document.getElementById('chartmain3'));

            function beautify() {
                myChart.showLoading();

                //异步加载的配置项和数据显示图表
                $.post('appjianrong').done(function (data) {

                    data = eval('(' + data + ')');
                    appl1 = [];
                    appdic = {};
                    var appbanben = data.map(function (item, index, arr) {
                        appl1.push(item.name)
                        console.log(appl1)
                        // 默认输出前5个
                        appdic[item.name] = index < 6
                    });

                    myChart.setOption({
                        title: {
                            text: 'APP型号订单量以及订单占比',
                            left: 'center',
                            textStyle: {
                                //  //文字颜色
                                //  color: '#ccc',
                                //  //字体风格,'normal','italic','oblique'
                                //  fontStyle: 'normal',
                                //  //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                                //  fontWeight: 'bold',
                                //  //字体系列
                                //  fontFamily: 'sans-serif',
                                //   //字体大小
                                fontSize: 12
                            }
                        },
                        tooltip: {
                            trigger: 'item',
                            formatter: '{a} <br/>{b}: {c} ({d}%)'
                        },
                        legend: {
                            type: 'scroll',
                            orient: 'vertical',
                            itemHeight: 5, //修改icon图形大小
                            textStyle: {
                                fontSize: 12,
                                color: '#000'
                            },

                            left: 10,

                            data: appl1,
                            selected: appdic


                        },
                        series: [
                            {
                                name: '访问来源',
                                type: 'pie',
                                radius: ['25%', '30%'],

                                avoidLabelOverlap: false,
                                label: {
                                    show: false,
                                    position: 'center'
                                },
                                emphasis: {
                                    label: {
                                        show: true,
                                        fontSize: '30',
                                        fontWeight: 'bold'
                                    }
                                },

                                labelLine: {
                                    show: false
                                },
                                data: data
                            }
                        ]
                    })
                    myChart1.setOption({
                        title: {
                            text: 'APP型号订单量以及订单占比',
                            left: 'center',
                            textStyle: {
                                fontSize: 12
                            }
                        },
                        tooltip: {
                            trigger: 'item',
                            formatter: '{a} <br/>{b}: {c} ({d}%)'
                        },
                        legend: {
                            type: 'scroll',
                            orient: 'vertical',
                            itemHeight: 5, //修改icon图形大小
                            textStyle: {
                                fontSize: 12,
                                color: '#000'
                            },

                            left: 10,

                            data: appl1,
                            selected: appdic


                        },
                        series: [
                            {
                                name: '访问来源',
                                type: 'pie',
                                radius: ['25%', '30%'],
                                avoidLabelOverlap: false,
                                data: data
                            }
                        ]
                    })
                    myChart2.setOption({
                        title: {
                            text: 'APP型号订单量以及订单占比',
                            left: 'center',
                            textStyle: {
                                //  //文字颜色
                                //  color: '#ccc',
                                //  //字体风格,'normal','italic','oblique'
                                //  fontStyle: 'normal',
                                //  //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                                //  fontWeight: 'bold',
                                //  //字体系列
                                //  fontFamily: 'sans-serif',
                                //   //字体大小
                                fontSize: 12
                            }
                        },
                        tooltip: {
                            trigger: 'item',
                            formatter: '{a} <br/>{b}: {c} ({d}%)'
                        },
                        legend: {
                            type: 'scroll',
                            orient: 'vertical',
                            itemHeight: 5, //修改icon图形大小
                            textStyle: {
                                fontSize: 12,
                                color: '#000'
                            },

                            left: 10,

                            data: appl1,
                            selected: appdic


                        },
                        series: [
                            {
                                name: '访问来源',
                                type: 'pie',
                                radius: ['25%', '30%'],
                                avoidLabelOverlap: false,

                                data: data
                            }
                        ]
                    })
                    myChart3.setOption({
                        title: {
                            text: 'APP型号订单量以及订单占比',
                            left: 'center',
                            textStyle: {
                          
                                fontSize: 12
                            }
                        },
                        tooltip: {
                            trigger: 'item',
                            formatter: '{a} <br/>{b}: {c} ({d}%)'
                        },
                        legend: {
                            type: 'scroll',
                            orient: 'vertical',
                            itemHeight: 5, //修改icon图形大小
                            textStyle: {
                                fontSize: 12,
                                color: '#000'
                            },

                            left: 10,

                            data: appl1,
                            selected: appdic


                        },
                        series: [
                            {
                                name: '访问来源',
                                type: 'pie',
                                radius: ['25%', '30%'],
                avoidLabelOverlap: false,

                            data: data
            }
        ]
    })

                myChart.hideLoading();

            })}










        </script>
    </div>

</body>

</html>